@R0
D=M
@X
M=D

@R1
D=M
@Y
M=D

@R4
M=0

@Y
D=M
@DIV_ZERO
D;JEQ

@X
D=M
@SX
M=0
@CHK_SX
D;JGE
@SX
M=1

(CHK_SX)
@Y
D=M
@SY
M=0
@CHK_SY
D;JGE
@SY
M=1

(CHK_SY)
@X
D=M
@AX
M=D
@SX
D=M
@ABS_X
D;JEQ
@AX
M=-M

(ABS_X)
@Y
D=M
@AY
M=D
@SY
D=M
@ABS_Y
D;JEQ
@AY
M=-M

(ABS_Y)
@R2
M=0
@R3
M=0

(DIV_LOOP)
@AX
D=M
@AY
D=D-M
@DIV_END
D;JLT

@AY
D=M
@AX
M=M-D
@R2
M=M+1
@DIV_LOOP
0;JMP

(DIV_END)
@AX
D=M
@R3
M=D

@SX
D=M
@SY
D=D-M
@ADJ_SIGN
D;JEQ
@R2
M=-M

(ADJ_SIGN)
@SX
D=M
@FINAL
D;JEQ
@R3
M=-M

(FINAL)
@END
0;JMP

(DIV_ZERO)
@R4
M=1

(END)
@END
0;JMP